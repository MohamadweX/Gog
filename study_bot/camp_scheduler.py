#!/usr/bin/env python3
"""
مجدول المعسكرات
يحتوي على وظائف وتعريفات لجدولة مهام المعسكرات الصباحية والمسائية
"""

from datetime import time

# تحديد أوقات التذكيرات للمعسكر الصباحي
# الشكل: (وقت التذكير بتنسيق HH:MM، نص الرسالة، النقاط المستحقة)
MORNING_REMINDERS = [
    # 1. الفجر - 4:25
    ("04:25", "🌅 <b>حان وقت صلاة الفجر</b>\n\nبدء يومك بالصلاة هو أفضل طريقة للتركيز والإنتاجية.\n\nصلِّ الفجر في وقتها، وخصص بعدها وقتاً للقرآن والأذكار. سيمنحك هذا الطاقة الإيجابية طوال اليوم! 🕋✨", 3),
    
    # 2. خطة اليوم - 8:00
    ("08:00", "📝 <b>حان وقت وضع خطة اليوم الدراسية</b>\n\nالآن هو الوقت المثالي لتحديد أهدافك لليوم!\n\nاكتب قائمة بالموضوعات التي ستدرسها اليوم، وحدد الساعات المخصصة لكل موضوع. التخطيط المسبق يجعل دراستك أكثر فعالية. 📊✅", 2),
    
    # 3. بداية المذاكرة - 8:30
    ("08:30", "📚 <b>وقت بدء المذاكرة الصباحية</b>\n\nابدأ الآن بأول موضوع في خطتك! الذهن في الصباح صافٍ ونشيط.\n\nركز على المواضيع الصعبة أولاً، وتجنب تصفح وسائل التواصل قبل إنهاء أول ساعتين من الدراسة! 💪🧠", 2),
    
    # 4. استراحة قصيرة - 10:30
    ("10:30", "☕ <b>وقت استراحة قصيرة</b>\n\nبعد مجهودك، تستحق استراحة قصيرة مدتها 15 دقيقة.\n\nاشرب ماء، تمشى قليلاً، وأدي تمارين إطالة بسيطة. تجنب فتح هاتفك خلال الاستراحة لتحافظ على تركيزك. 🚶‍♂️✨", 1),
    
    # 5. العودة للمذاكرة - 10:45
    ("10:45", "📝 <b>العودة للمذاكرة</b>\n\nحان وقت استكمال الدراسة! عد إلى مكانك وابدأ الحصة الثانية.\n\nغير الموضوع الذي تدرسه للحفاظ على نشاط ذهنك. يمكنك الآن تخصيص وقت للتمارين والتطبيقات العملية. 🖊️📊", 2),
    
    # 6. صلاة الظهر - 12:45
    ("12:45", "🕌 <b>حان وقت صلاة الظهر</b>\n\nالصلاة ليست فقط واجباً، بل هي فرصة للراحة وتجديد التركيز.\n\nتوضأ، صلِّ، وأخذ استراحة خفيفة. الصلاة تساعدك على التخلص من التوتر وتعزز قدرتك على التعلم! 🤲✨", 3),
    
    # 7. وقت الغداء - 13:15
    ("13:15", "🍽️ <b>وقت الغداء</b>\n\nحان وقت تناول وجبة غداء متوازنة لتجديد طاقتك.\n\nاختر وجبة صحية تحتوي على البروتين والخضروات. تجنب الوجبات الثقيلة التي تسبب الخمول والنعاس. خذ 30 دقيقة للاستمتاع بوجبتك. 🥗🍇", 1),
    
    # 8. وقت القيلولة - 13:45
    ("13:45", "😴 <b>وقت القيلولة</b>\n\nخذ قيلولة قصيرة (20-30 دقيقة) لتنشيط ذهنك للدراسة المسائية.\n\nالقيلولة القصيرة تعزز الذاكرة والتركيز. ضبط المنبه مهم لتجنب النوم لفترة طويلة. 💤⏰", 1),
    
    # 9. استئناف المذاكرة - 14:30
    ("14:30", "📖 <b>استئناف المذاكرة بعد الراحة</b>\n\nأنت الآن في منتصف اليوم الدراسي - وقت مثالي لمراجعة ما درسته صباحاً.\n\nالمراجعة السريعة ستثبت المعلومات في ذاكرتك. بعدها، ابدأ بموضوع جديد أو استكمل ما توقفت عنده. 🔍📚", 2),
    
    # 10. صلاة العصر - 16:30
    ("16:30", "🕌 <b>حان وقت صلاة العصر</b>\n\nتوقف الآن لأداء صلاة العصر في وقتها.\n\nاستغل فترة ما بعد الصلاة للدعاء وتجديد النية. هذه فرصة لإعادة ضبط تركيزك للساعات المتبقية من اليوم. 🤲💫", 3),
    
    # 11. استراحة وتمارين - 17:00
    ("17:00", "🏃‍♂️ <b>وقت للحركة والنشاط</b>\n\nحان وقت استراحة نشطة! خصص 20-30 دقيقة للتمارين الخفيفة.\n\nالمشي أو تمارين الإطالة أو صعود الدرج كلها خيارات ممتازة. النشاط البدني يزيد من تدفق الدم للدماغ ويحسن قدرتك على التركيز. 🏃‍♀️🧠", 1),
    
    # 12. المذاكرة المسائية - 17:30
    ("17:30", "📝 <b>المذاكرة المسائية</b>\n\nحان وقت الجلسة الدراسية الأخيرة لليوم! ركز على المراجعة والتلخيص.\n\nهذا وقت مثالي للتدرب على حل الأسئلة وإجراء الاختبارات الذاتية. التطبيق العملي يثبت المعلومات في ذاكرتك طويلة المدى. 📊✍️", 2),
    
    # 13. صلاة المغرب - 19:45
    ("19:45", "🕌 <b>حان وقت صلاة المغرب</b>\n\nتوقف عن المذاكرة لأداء صلاة المغرب.\n\nاستغل هذا الوقت للتأمل والتفكر في إنجازات اليوم. تذكر أن النجاح الحقيقي هو الاستمرارية وليس المجهود المنقطع. 🌙🤲", 3),
    
    # 14. العشاء - 20:30
    ("20:30", "🍽️ <b>وقت العشاء</b>\n\nحان وقت تناول وجبة خفيفة للعشاء.\n\nاختر وجبة سهلة الهضم وغنية بالعناصر الغذائية. تناول العشاء ببطء واستمتع به مع العائلة إن أمكن. تجنب الأطعمة الدسمة والسكريات قبل النوم. 🥗🍵", 1),
    
    # 15. صلاة العشاء وتقييم اليوم - 21:30
    ("21:30", "📋 <b>صلاة العشاء وتقييم اليوم</b>\n\nبعد صلاة العشاء، خصص 15 دقيقة لتقييم إنجازاتك اليوم.\n\nراجع خطتك اليومية، وحدد ما أنجزته وما تحتاج لإكماله غداً. دوّن ملاحظاتك واكتب خطة مبدئية لليوم التالي. 📝✅", 3)
]


# تحديد أوقات التذكيرات للمعسكر المسائي
# الشكل: (وقت التذكير بتنسيق HH:MM، نص الرسالة، النقاط المستحقة)
EVENING_REMINDERS = [
    # 1. بداية المعسكر المسائي - 16:00
    ("16:00", "🌆 <b>بداية المعسكر المسائي</b>\n\nمرحباً بك في المعسكر المسائي، وقت الإنتاجية والتركيز!\n\nحدد أهدافك لهذه الليلة واكتب جدولك الدراسي. التخطيط الجيد هو سر النجاح في الدراسة المسائية. 🗓️✨", 2),
    
    # 2. جلسة الدراسة الأولى - 16:30
    ("16:30", "📚 <b>جلسة الدراسة الأولى</b>\n\nحان وقت البدء بالمذاكرة! ابدأ بأكثر المواد تحدياً.\n\nخصص ساعة كاملة لموضوع واحد مهم. الدراسة المركزة لفترة متواصلة تحقق نتائج أفضل من الدراسة المتقطعة. 🧠💪", 2),
    
    # 3. صلاة المغرب - 19:45
    ("19:45", "🕌 <b>حان وقت صلاة المغرب</b>\n\nتوقف الآن لأداء صلاة المغرب في وقتها.\n\nخذ بضع دقائق بعد الصلاة للدعاء وتجديد النية. الراحة القصيرة ستساعدك على استئناف الدراسة بذهن صافٍ. 🌙🤲", 3),
    
    # 4. استراحة العشاء - 20:00
    ("20:00", "🍽️ <b>استراحة العشاء</b>\n\nحان وقت تناول وجبة خفيفة للعشاء.\n\nاختر وجبة متوازنة تمدك بالطاقة دون أن تسبب الخمول. تجنب الكافيين بعد السادسة مساءً حتى لا يؤثر على نومك لاحقاً. 🥗☕", 1),
    
    # 5. جلسة الدراسة المسائية - 20:30
    ("20:30", "📝 <b>جلسة الدراسة المسائية</b>\n\nالآن أنت في ذروة المعسكر المسائي! خصص هذه الفترة للدراسة المركزة.\n\nحاول الالتزام بتقنية بومودورو: 25 دقيقة دراسة ثم 5 دقائق راحة. هذه الطريقة تحافظ على تركيزك وإنتاجيتك. 🍅⏱️", 3),
    
    # 6. صلاة العشاء - 21:10
    ("21:10", "🕌 <b>حان وقت صلاة العشاء</b>\n\nتوقف الآن لأداء صلاة العشاء في وقتها.\n\nصلاة العشاء فرصة للراحة وتجديد النشاط. بعد الصلاة، خذ 10 دقائق لتأمل ما أنجزته حتى الآن وما تبقى من مهام. 🌙🤲", 3),
    
    # 7. استراحة طويلة - 01:00
    ("01:00", "☕ <b>استراحة طويلة</b>\n\nحان وقت أخذ استراحة طويلة من 15-20 دقيقة.\n\nاشرب كوباً من الشاي أو تمشى قليلاً. الاستراحات المنتظمة ضرورية للحفاظ على إنتاجيتك خلال الليل. تجنب النظر للشاشات خلال الاستراحة. 🚶‍♂️🍵", 1),
    
    # 8. تقييم المعسكر المسائي والتحضير للفجر - 04:05
    ("04:05", "🌙 <b>تقييم المعسكر المسائي والتحضير للفجر</b>\n\nاقترب وقت الفجر! راجع إنجازاتك في هذا المعسكر المسائي.\n\nدوّن ما أنجزته وما ستكمله غداً. توضأ واستعد لصلاة الفجر. تذكر أن الاستمرارية هي سر النجاح في رحلة العلم. 📋🌅", 3)
]


def get_time_object(time_str):
    """تحويل النص الزمني إلى كائن time"""
    hour, minute = map(int, time_str.split(':'))
    return time(hour, minute)


def is_time_match(current_time, camp_time):
    """التحقق من مطابقة الوقت الحالي مع وقت مهمة معسكر"""
    camp_time_obj = get_time_object(camp_time)
    return current_time.hour == camp_time_obj.hour and current_time.minute == camp_time_obj.minute


def get_camp_task_at_time(time_str, is_morning=True):
    """الحصول على مهمة معسكر في وقت محدد"""
    reminders = MORNING_REMINDERS if is_morning else EVENING_REMINDERS
    
    for reminder in reminders:
        if reminder[0] == time_str:
            return reminder
    
    return None